import{a as M}from"./chunk-RDT47II3.js";import{a as k}from"./chunk-5Z73TVS5.js";import"./chunk-M3KYLOYJ.js";import{d as C}from"./chunk-7TACDOUA.js";import{a as y}from"./chunk-VGOS47CB.js";import"./chunk-WKNI7WHX.js";import{a as V}from"./chunk-YBB3AIFO.js";import{a as U}from"./chunk-VN6LWNMF.js";import"./chunk-UYQAHJAI.js";import{Ab as r,Bb as c,Cb as S,Gb as _,Jb as h,Lb as u,Tb as s,Ub as I,Wb as g,Ya as o,Yb as x,Za as n,a as m,ha as d,mb as b,qa as p,qb as v,ra as l,vb as f}from"./chunk-LRPHIVML.js";function w(i,e){if(i&1){let t=_();r(0,"h1"),s(1),r(2,"button",1),h("click",function(){p(t);let O=u();return l(O.subscribe())}),s(3),r(4,"mat-icon"),s(5,"add"),c()()(),S(6,"app-videolist",2)}if(i&2){let t=u();o(),g("","@","",t.user.username," videos "),o(2),I(t.amISub?"Unsubscribe":"Subscribe"),o(3),v("videoList",t.uploadedVideoList)("sortAllowed",!0)("latestFirst",!0)}}function D(i,e){i&1&&(r(0,"p",0),s(1,"This user doesn't exist, young lady \u{1F64F}"),c())}var B=class i{constructor(e,t,a){this._userService=e;this.router=t;this._matSnackBar=a}uploadedVideoList;userId;user;ngOnInit(){this.router.paramMap.subscribe(e=>{this.userId=Number(e.get("UserId")),this.getVideos(),this.getUser()})}getVideos(){this._userService.getUserVideos(this.userId).subscribe({next:e=>{this.uploadedVideoList=e.map(t=>m({},t))}})}subscribe(){this._userService.subscribeToUser({UserId:this.userId}).subscribe({next:e=>{this._matSnackBar.open(e.message,"OK",{duration:2e3}),this.amISub=e.message=="Subscribed"},error:e=>{this._matSnackBar.open(e.error.message,"OK",{duration:2e3})}})}getUser(){this._userService.getUser(this.userId).subscribe(e=>{this.user=e,this.amISubscribed()},e=>{this._matSnackBar.open(e.error.message,"OK",{duration:2e3})})}amISub;amISubscribed(){this._userService.amISubscribed(this.user.id).subscribe({next:e=>{this.amISub=e.message=="yes"}})}static \u0275fac=function(t){return new(t||i)(n(V),n(C),n(y))};static \u0275cmp=d({type:i,selectors:[["app-user"]],standalone:!0,features:[x],decls:2,vars:1,consts:[[1,"center"],["mat-stroked-button","","color","accent",2,"color","orange",3,"click"],[3,"videoList","sortAllowed","latestFirst"]],template:function(t,a){t&1&&b(0,w,7,6)(1,D,2,0,"p",0),t&2&&f(a.user?0:1)},dependencies:[M,U,k],styles:["h1[_ngcontent-%COMP%]{text-align:center;padding:8px}"]})};export{B as UserComponent};
