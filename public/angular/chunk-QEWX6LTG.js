import{c as d,f as u}from"./chunk-3TYT3QDP.js";import{Z as c,ca as p,gb as l,jc as a}from"./chunk-7QAWOP5W.js";var i=class extends Error{};i.prototype.name="InvalidTokenError";function m(t){return decodeURIComponent(atob(t).replace(/(.)/g,(e,r)=>{let n=r.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n}))}function g(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return m(e)}catch{return atob(e)}}function f(t,e){if(typeof t!="string")throw new i("Invalid token specified: must be a string");e||(e={});let r=e.header===!0?0:1,n=t.split(".")[r];if(typeof n!="string")throw new i(`Invalid token specified: missing part #${r+1}`);let s;try{s=g(n)}catch(o){throw new i(`Invalid token specified: invalid base64 for part #${r+1} (${o.message})`)}try{return JSON.parse(s)}catch(o){throw new i(`Invalid token specified: invalid json for part #${r+1} (${o.message})`)}}var h=class t{constructor(e){this.http=e}user_key=l("");user_data=a(()=>{let e=this.user_key();return e.length==0?{id:0,username:"",isAdmin:!1}:f(e)});loggedIn=a(()=>this.user_key().length>0);isAdmin=a(()=>this.user_data().isAdmin);baseUrl=u.baseUrl;login(e){return this.http.post(this.baseUrl+"/authenticate/login",e)}register(e){return this.http.post(this.baseUrl+"/authenticate/register",e)}static \u0275fac=function(r){return new(r||t)(p(d))};static \u0275prov=c({token:t,factory:t.\u0275fac,providedIn:"root"})};export{h as a};
