import{a as F}from"./chunk-HW4DBAQH.js";import{a as O}from"./chunk-7RDES63O.js";import{b as M}from"./chunk-E37BN3QB.js";import{a as A}from"./chunk-4BRXA6Y7.js";import{a as B}from"./chunk-UW7F4QFY.js";import"./chunk-UVWPODLH.js";import"./chunk-VWCINB25.js";import{a as L}from"./chunk-3NUN5NFM.js";import{d as V}from"./chunk-RH7ZN5VZ.js";import"./chunk-2OCYWG4R.js";import{$a as a,Ab as o,Bb as r,Cb as _,Gb as C,Jb as I,Lb as c,Mc as T,Nc as b,Qc as l,Sc as v,Tb as s,Ub as U,Wb as y,Yb as k,_a as n,a as g,ja as S,ob as d,qb as p,sa as h,ta as x,vb as m}from"./chunk-ARRVSJN5.js";function D(i,e){if(i&1){let t=C();o(0,"button",5),I("click",function(){h(t);let f=c(2);return x(f.subscribe())}),s(1),o(2,"mat-icon"),s(3,"add"),r()()}if(i&2){let t=c(2);n(),U(t.amISub?"Unsubscribe":"Subscribe")}}function E(i,e){if(i&1&&_(0,"app-videolist",3),i&2){let t=c(2);p("videoList",t.uploadedVideoList)("sortAllowed",!0)("latestFirst",!0)}}function j(i,e){i&1&&(o(0,"p",4),s(1,"No Videos! (\u2022\u02CB _ \u02CA\u2022)"),r())}function N(i,e){if(i&1&&(o(0,"h1",1),s(1),d(2,D,4,1,"button",2),r(),d(3,E,1,3,"app-videolist",3)(4,j,2,0,"p",4),_(5,"br")(6,"br")),i&2){let t=c();n(),y("","@","",t.user.username," videos "),n(),m(t.loggedIn()?2:-1),n(),m(t.uploadedVideoList&&t.uploadedVideoList.length>0?3:4)}}function K(i,e){i&1&&(o(0,"p",0),s(1,"This user doesn't exist, young lady \u{1F64F}"),r())}var w=class i{constructor(e,t,u,f){this._userService=e;this.router=t;this._matSnackBar=u;this._authService=f}uploadedVideoList;userId;user;loggedIn;ngOnInit(){this.loggedIn=this._authService.loggedIn,this.router.paramMap.subscribe(e=>{this.userId=Number(e.get("UserId")),this.getVideos(),this.getUser()})}getVideos(){this._userService.getUserVideos(this.userId).subscribe({next:e=>{this.uploadedVideoList=e.map(t=>g({},t))}})}subscribe(){this._userService.subscribeToUser({UserId:this.userId}).subscribe({next:e=>{this._matSnackBar.open(e.message,"OK",{duration:2e3}),this.amISub=e.message=="Subscribed"},error:e=>{this._matSnackBar.open(e.error.message,"OK",{duration:2e3})}})}getUser(){this._userService.getUser(this.userId).subscribe(e=>{this.user=e,this.loggedIn()&&this.amISubscribed()},e=>{this._matSnackBar.open(e.error.message,"OK",{duration:2e3})})}amISub;amISubscribed(){this._userService.amISubscribed(this.user.id).subscribe({next:e=>{this.amISub=e.message=="yes"}})}static \u0275fac=function(t){return new(t||i)(a(L),a(V),a(O),a(M))};static \u0275cmp=S({type:i,selectors:[["app-user"]],standalone:!0,features:[k],decls:3,vars:2,consts:[[1,"center"],[2,"color","darkgray"],["mat-stroked-button","","color","accent",2,"color","orange"],[3,"videoList","sortAllowed","latestFirst"],[2,"text-align","center","color","darkgray"],["mat-stroked-button","","color","accent",2,"color","orange",3,"click"]],template:function(t,u){t&1&&(o(0,"div"),d(1,N,7,4)(2,K,2,0,"p",0),r()),t&2&&(p("@slideFromTop",void 0),n(),m(u.user?1:2))},dependencies:[B,A,F],styles:["h1[_ngcontent-%COMP%]{text-align:center;padding:8px}"],data:{animation:[T("slideFromTop",[v(":enter",[l({opacity:0}),b("500ms ease-out",l({opacity:1}))]),v(":leave",[b("300ms ease-in",l({transform:"translateY(-100%)",opacity:0}))])])]}})};export{w as UserComponent};
