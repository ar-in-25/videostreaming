import{a as V}from"./chunk-OXRKKWFP.js";import{a as T}from"./chunk-C3XJBGNR.js";import"./chunk-5M3POR7D.js";import"./chunk-VDEIOOH3.js";import{a as F}from"./chunk-CPIC4GQN.js";import{d as M}from"./chunk-UJXADRIS.js";import{a as O}from"./chunk-YX3X7DIT.js";import{a as B}from"./chunk-H66NQDTY.js";import"./chunk-2XX4ULUD.js";import{Ab as h,Eb as I,Hb as x,Ic as k,Jb as u,Jc as p,Mc as c,Oc as l,Rb as o,Sb as C,Ub as U,Wb as y,Ya as s,Za as n,a as b,ha as v,mb as _,ob as d,qa as f,ra as S,tb as g,yb as r,zb as a}from"./chunk-B7KJVNON.js";function A(i,e){if(i&1){let t=I();r(0,"h1"),o(1),r(2,"button",1),x("click",function(){f(t);let D=u();return S(D.subscribe())}),o(3),r(4,"mat-icon"),o(5,"add"),a()()(),h(6,"app-videolist",2)}if(i&2){let t=u();s(),U("","@","",t.user.username," videos "),s(2),C(t.amISub?"Unsubscribe":"Subscribe"),s(3),d("videoList",t.uploadedVideoList)("sortAllowed",!0)("latestFirst",!0)}}function L(i,e){i&1&&(r(0,"p",0),o(1,"This user doesn't exist, young lady \u{1F64F}"),a())}var w=class i{constructor(e,t,m){this._userService=e;this.router=t;this._matSnackBar=m}uploadedVideoList;userId;user;ngOnInit(){this.router.paramMap.subscribe(e=>{this.userId=Number(e.get("UserId")),this.getVideos(),this.getUser()})}getVideos(){this._userService.getUserVideos(this.userId).subscribe({next:e=>{this.uploadedVideoList=e.map(t=>b({},t))}})}subscribe(){this._userService.subscribeToUser({UserId:this.userId}).subscribe({next:e=>{this._matSnackBar.open(e.message,"OK",{duration:2e3}),this.amISub=e.message=="Subscribed"},error:e=>{this._matSnackBar.open(e.error.message,"OK",{duration:2e3})}})}getUser(){this._userService.getUser(this.userId).subscribe(e=>{this.user=e,this.amISubscribed()},e=>{this._matSnackBar.open(e.error.message,"OK",{duration:2e3})})}amISub;amISubscribed(){this._userService.amISubscribed(this.user.id).subscribe({next:e=>{this.amISub=e.message=="yes"}})}static \u0275fac=function(t){return new(t||i)(n(F),n(M),n(O))};static \u0275cmp=v({type:i,selectors:[["app-user"]],standalone:!0,features:[y],decls:3,vars:2,consts:[[1,"center"],["mat-stroked-button","","color","accent",2,"color","orange",3,"click"],[3,"videoList","sortAllowed","latestFirst"]],template:function(t,m){t&1&&(r(0,"div"),_(1,A,7,6)(2,L,2,0,"p",0),a()),t&2&&(d("@slideFromTop",void 0),s(),g(m.user?1:2))},dependencies:[V,B,T],styles:["h1[_ngcontent-%COMP%]{text-align:center;padding:8px}"],data:{animation:[k("slideFromTop",[l(":enter",[c({opacity:0}),p("500ms ease-out",c({opacity:1}))]),l(":leave",[p("300ms ease-in",c({transform:"translateY(-100%)",opacity:0}))])])]}})};export{w as UserComponent};
