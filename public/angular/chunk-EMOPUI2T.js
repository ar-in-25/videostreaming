import{a as I}from"./chunk-XTXNDTFF.js";import{g as R}from"./chunk-OU7FXA6S.js";import"./chunk-D32MY3HO.js";import{Ab as a,Eb as g,Hb as c,Jb as x,Qb as v,Rb as n,Tb as C,Wb as b,Ya as h,Za as k,ha as _,ob as w,qa as p,ra as u,ub as S,wb as y,xb as A,yb as o,zb as r}from"./chunk-7CX7LTWM.js";var f=class l{mediaRecorder;audioChunks=[];connection;ngOnInit(){let e=`${window.location.protocol==="https:"?"wss":"ws"}://${window.location.host}/8080`;this.connection=new WebSocket(e),this.connection.onopen=()=>{console.log("Connected to the server")},this.connection.onmessage=i=>{console.log("playing");let s=i.data,m=URL.createObjectURL(s),d=new Audio(m);console.log(d),d.play()},this.connection.onerror=i=>{console.error("WebSocket error:",i)},this.connection.onclose=()=>{console.log("WebSocket connection closed")}}sendAudio(){navigator.mediaDevices.getUserMedia({audio:!0}).then(t=>{this.mediaRecorder=new MediaRecorder(t),console.log("created stream",t),this.mediaRecorder.ondataavailable=e=>{console.log("pushing data"),this.audioChunks.push(e.data)},this.mediaRecorder.onstop=()=>{let e=new Blob(this.audioChunks,{type:"audio/ogg"});this.audioChunks=[],console.log("sending"),this.connection.send(e),t.getTracks().forEach(i=>i.stop())},this.mediaRecorder.start(100)})}stopAudio(){console.log("stop "),this.mediaRecorder.stop(),this.mediaRecorder}static \u0275fac=function(e){return new(e||l)};static \u0275cmp=_({type:l,selectors:[["app-livechat"]],standalone:!0,features:[b],decls:6,vars:0,consts:[[3,"click"]],template:function(e,i){e&1&&(o(0,"p"),n(1,"livechat works!"),r(),o(2,"button",0),c("click",function(){return i.sendAudio()}),n(3,"start"),r(),o(4,"button",0),c("click",function(){return i.stopAudio()}),n(5,"stop"),r())}})};function T(l,t){if(l&1){let e=g();o(0,"a",4),n(1),r(),o(2,"p"),n(3),r(),o(4,"button",3),c("click",function(){let s=p(e).$implicit,m=x();return u(m.deletevideo(s.id))}),n(5,"delete"),r()}if(l&2){let e=t.$implicit;w("routerLink","/video/"+e.id),h(),C("video id : ",e.id,""),h(2),C("reports : ",e.reportCount,"")}}var L=class l{constructor(t){this._adminService=t}reportList;ngOnInit(){this.getReport()}deleteuser(t){this._adminService.deleteUserById(t).subscribe(e=>{alert("deleted")})}deletevideo(t){this._adminService.deleteVideoById(t).subscribe(e=>{alert("deleted")})}deletecomment(t){this._adminService.deleteCommentById(t).subscribe(e=>{alert("deleted")})}getReport(){this._adminService.getAllReportedVideos().subscribe(t=>{this.reportList=t})}static \u0275fac=function(e){return new(e||l)(k(I))};static \u0275cmp=_({type:l,selectors:[["app-admin"]],standalone:!0,features:[b],decls:25,vars:0,consts:[["userid",""],["videoid",""],["commentid",""],[3,"click"],[3,"routerLink"]],template:function(e,i){if(e&1){let s=g();n(0,`delete user by id
`),a(1,"input",null,0),o(3,"button",3),c("click",function(){p(s);let d=v(2);return u(i.deleteuser(d.value))}),n(4,"delete"),r(),a(5,"br"),n(6,` delete video by id
`),a(7,"input",null,1),o(9,"button",3),c("click",function(){p(s);let d=v(8);return u(i.deletevideo(d.value))}),n(10,"delete"),r(),a(11,"br"),n(12,` delete comment by id
`),a(13,"input",null,2),o(15,"button",3),c("click",function(){p(s);let d=v(14);return u(i.deletecomment(d.value))}),n(16,"delete"),r(),a(17,"br"),o(18,"h2"),n(19,"report list"),r(),o(20,"button",3),c("click",function(){return p(s),u(i.getReport())}),n(21,"refresh"),r(),y(22,T,6,3,null,null,S),a(24,"app-livechat")}e&2&&(h(22),A(i.reportList))},dependencies:[R,f]})};export{L as AdminComponent};
