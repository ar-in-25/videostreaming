import{c as d,f}from"./chunk-KND5QEEJ.js";import{Z as c,ca as p,hb as l,nc as i}from"./chunk-RHHFVKVY.js";var o=class extends Error{};o.prototype.name="InvalidTokenError";function g(e){return decodeURIComponent(atob(e).replace(/(.)/g,(t,r)=>{let n=r.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n}))}function m(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return g(t)}catch{return atob(t)}}function h(e,t){if(typeof e!="string")throw new o("Invalid token specified: must be a string");t||(t={});let r=t.header===!0?0:1,n=e.split(".")[r];if(typeof n!="string")throw new o(`Invalid token specified: missing part #${r+1}`);let s;try{s=m(n)}catch(a){throw new o(`Invalid token specified: invalid base64 for part #${r+1} (${a.message})`)}try{return JSON.parse(s)}catch(a){throw new o(`Invalid token specified: invalid json for part #${r+1} (${a.message})`)}}var u=class e{constructor(t){this.http=t}user_key=l("");user_data=i(()=>{let t=this.user_key();return h(t)});loggedIn=i(()=>this.user_key().length>0);baseUrl=f.baseUrl;login(t){return this.http.post(this.baseUrl+"authenticate/login",t)}register(t){return this.http.post(this.baseUrl+"authenticate/register",t)}static \u0275fac=function(r){return new(r||e)(p(d))};static \u0275prov=c({token:e,factory:e.\u0275fac,providedIn:"root"})};export{u as a};
