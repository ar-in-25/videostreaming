import{a as T}from"./chunk-OXRKKWFP.js";import{a as F}from"./chunk-C3XJBGNR.js";import"./chunk-5M3POR7D.js";import"./chunk-VDEIOOH3.js";import{a as O}from"./chunk-CPIC4GQN.js";import{d as M}from"./chunk-UJXADRIS.js";import{a as w}from"./chunk-YX3X7DIT.js";import{b as V}from"./chunk-YSFHPBWF.js";import{a as A}from"./chunk-H66NQDTY.js";import"./chunk-2XX4ULUD.js";import{Ab as I,Eb as x,Hb as C,Ic as B,Jb as c,Jc as b,Mc as m,Oc as v,Rb as a,Sb as U,Ub as y,Wb as k,Ya as r,Za as n,a as f,ha as _,mb as u,ob as l,qa as g,ra as h,tb as p,yb as o,zb as s}from"./chunk-B7KJVNON.js";function E(i,e){if(i&1){let t=x();o(0,"button",3),C("click",function(){g(t);let S=c(2);return h(S.subscribe())}),a(1),o(2,"mat-icon"),a(3,"add"),s()()}if(i&2){let t=c(2);r(),U(t.amISub?"Unsubscribe":"Subscribe")}}function L(i,e){if(i&1&&(o(0,"h1"),a(1),u(2,E,4,1,"button",1),s(),I(3,"app-videolist",2)),i&2){let t=c();r(),y("","@","",t.user.username," videos "),r(),p(t.loggedIn()?2:-1),r(),l("videoList",t.uploadedVideoList)("sortAllowed",!0)("latestFirst",!0)}}function j(i,e){i&1&&(o(0,"p",0),a(1,"This user doesn't exist, young lady \u{1F64F}"),s())}var D=class i{constructor(e,t,d,S){this._userService=e;this.router=t;this._matSnackBar=d;this._authService=S}uploadedVideoList;userId;user;loggedIn;ngOnInit(){this.loggedIn=this._authService.loggedIn,this.router.paramMap.subscribe(e=>{this.userId=Number(e.get("UserId")),this.getVideos(),this.getUser()})}getVideos(){this._userService.getUserVideos(this.userId).subscribe({next:e=>{this.uploadedVideoList=e.map(t=>f({},t))}})}subscribe(){this._userService.subscribeToUser({UserId:this.userId}).subscribe({next:e=>{this._matSnackBar.open(e.message,"OK",{duration:2e3}),this.amISub=e.message=="Subscribed"},error:e=>{this._matSnackBar.open(e.error.message,"OK",{duration:2e3})}})}getUser(){this._userService.getUser(this.userId).subscribe(e=>{this.user=e,this.amISubscribed()},e=>{this._matSnackBar.open(e.error.message,"OK",{duration:2e3})})}amISub;amISubscribed(){this._userService.amISubscribed(this.user.id).subscribe({next:e=>{this.amISub=e.message=="yes"}})}static \u0275fac=function(t){return new(t||i)(n(O),n(M),n(w),n(V))};static \u0275cmp=_({type:i,selectors:[["app-user"]],standalone:!0,features:[k],decls:3,vars:2,consts:[[1,"center"],["mat-stroked-button","","color","accent",2,"color","orange"],[3,"videoList","sortAllowed","latestFirst"],["mat-stroked-button","","color","accent",2,"color","orange",3,"click"]],template:function(t,d){t&1&&(o(0,"div"),u(1,L,4,6)(2,j,2,0,"p",0),s()),t&2&&(l("@slideFromTop",void 0),r(),p(d.user?1:2))},dependencies:[T,A,F],styles:["h1[_ngcontent-%COMP%]{text-align:center;padding:8px}"],data:{animation:[B("slideFromTop",[v(":enter",[m({opacity:0}),b("500ms ease-out",m({opacity:1}))]),v(":leave",[b("300ms ease-in",m({transform:"translateY(-100%)",opacity:0}))])])]}})};export{D as UserComponent};
